<!DOCTYPE html>
<html>
<head>
  <title>Solo cry</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body onload="initialize()">

<div class="header">
  <h1>Solo Cry</h1>
</div>
<div class="row">
  <div class="col-7">
    <p id="myPara">...</p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>
    <p>Fighter: <select class="fighterSelector" id="mySelect"></select></p>

  </div>
  <div class="col-5 menu">
    <ul>
      <li onclick="initializeActivationOrder();">Initialize</li>
      <li onclick="activateFighter();">Activate Fighter</li>
    </ul>
  </div>
</div>
<div class="row">
  <div class="col-12">
  </div>
</div>
</body>
</html>

<script>

var untamedBeasts = ["Heart-eater", "Beastspeaker", "Rocktusk Prowler", "First Fang", "Preytaker w. Sword", "Preytaker w. Axe", "Plains-runner 1", "Plains-runner 2", "Plains-runner 3"];
var activationOrder = [];
var currentFighter;
var boost = ["No boost this turn", "Move +2", "Attacks +2", "Strength +1", "Heal 5 wounds", "Activation +1" ];


function initialize(){
  activationOrder = [];
  currentFighter = "";
  createFighterSelectors(untamedBeasts);
}



function createFighterSelectors(warband){
  warband.unshift("Deactivated");
  var selectors = document.getElementsByClassName("fighterSelector");
  for (var j = 0; j < selectors.length; j++){
    for (var i = 0; i < warband.length; i++){
      var opt = document.createElement("option");
      var att = document.createAttribute("value");
      att.value = warband[i];
      opt.setAttributeNode(att);

      var node = document.createTextNode(warband[i]);
      opt.appendChild(node);
      var element = document.getElementsByClassName("fighterSelector")[j];
      element.appendChild(opt);
    }
  }
}

function convertSelectorsToArray(selectors){
  var arr = [];
  for (var i = 0; i < selectors.length; i++){
    arr.push(selectors[i].options[selectors[i].selectedIndex].text);
  }
  return arr;
}

function removeItems(arr,value){
  var cleanedArr = [];
  for (var i = 0; i < arr.length; i++){
    if (arr[i] != value){
      cleanedArr.push(arr[i]);
    }
  }

  return cleanedArr;
}

function initializeActivationOrder(){

  var myArray = convertSelectorsToArray(document.getElementsByClassName("fighterSelector"));
  console.log(myArray);
  var myCleanedArray = removeItems(myArray,"Deactivated");
  console.log(myCleanedArray);
  console.log(myCleanedArray.length);
  if (myCleanedArray.length == 0){
    alert ("No active fighters to initialize!");
  } else {
    activationOrder = shuffleArray(myCleanedArray);
    alert ("Activation order initialized");
  }
}

function shuffleArray(x){
  // for 1000 turns, switch the values of two random items.
  for (var i = 0; i < 1000; i++){
    var location1 = Math.floor((Math.random() * x.length));
    var location2 = Math.floor((Math.random() * x.length));
    var tmp = x[location1];
    x[location1] = x[location2];
    x[location2] = tmp;
  }
  return x;
}


function activateFighter(){
  if (activationOrder.length == 0) {
    alert("No fighters left!");
    return;
  } else {
    currentFighter = activationOrder.shift();
    alert("Activate " + currentFighter + " with " + boost[Math.floor(Math.random() * 6)]);

  }
}



</script>
